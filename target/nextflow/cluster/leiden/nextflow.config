manifest {
  name = 'leiden'
  mainScript = 'main.nf'
  nextflowVersion = '!>=20.12.1-edge'
  version = '0.3.1'
  description = 'Cluster cells using the Leiden algorithm [Traag18] implemented in the Scanpy framework [Wolf18]. Leiden is an improved version of the Louvain algorithm [Blondel08]. \nIt has been proposed for single-cell analysis by [Levine15]. \nThis requires having ran neighbors/find_neighbors or neighbors/bbknn first.\n\nBlondel et al. (2008), Fast unfolding of communities in large networks, J. Stat. Mech.\nLevine et al. (2015), Data-Driven Phenotypic Dissection of AML Reveals Progenitor-like Cells that Correlate with Prognosis, Cell.\nTraag et al. (2018), From Louvain to Leiden: guaranteeing well-connected communities arXiv.\nWolf et al. (2018), Scanpy: large-scale single-cell gene expression data analysis, Genome Biology.\n'
  author = 'Dries De Maeyer <ddemaeyer@gmail.com> (maintainer) {account: ddemaey1}'
}

// detect tempdir
tempDir = java.nio.file.Paths.get(
  System.getenv('NXF_TEMP') ?:
    System.getenv('VIASH_TEMP') ?: 
    System.getenv('TEMPDIR') ?: 
    System.getenv('TMPDIR') ?: 
    '/tmp'
).toAbsolutePath()

profiles {
  docker {
    docker.enabled         = true
    docker.userEmulation   = true
    docker.temp            = tempDir
    singularity.enabled    = false
    podman.enabled         = false
    shifter.enabled        = false
    charliecloud.enabled   = false
  }
  singularity {
    singularity.enabled    = true
    singularity.autoMounts = true
    docker.enabled         = false
    podman.enabled         = false
    shifter.enabled        = false
    charliecloud.enabled   = false
  }
  podman {
    podman.enabled         = true
    podman.temp            = tempDir
    docker.enabled         = false
    singularity.enabled    = false
    shifter.enabled        = false
    charliecloud.enabled   = false
  }
  shifter {
    shifter.enabled        = true
    docker.enabled         = false
    singularity.enabled    = false
    podman.enabled         = false
    charliecloud.enabled   = false
  }
  charliecloud {
    charliecloud.enabled   = true
    charliecloud.temp      = tempDir
    docker.enabled         = false
    singularity.enabled    = false
    podman.enabled         = false
    shifter.enabled        = false
  }
}